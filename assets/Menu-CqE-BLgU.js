import{r as i,j as c,c as j,u as x,L as f,a as g,b as w,P as y,A as v,H as N}from"./index-DUXgOk4t.js";const b="_input_1ljti_1",$="_invalid_1ljti_35",E="_icon_1ljti_51",o={input:b,invalid:$,"input-wrapper":"_input-wrapper_1ljti_43",icon:E},F=i.forwardRef(function({className:r,isValid:e=!1,...t},n){return c.jsxs("div",{className:o["input-wrapper"],children:[c.jsx("img",{className:o.icon,src:"search-icon.svg",alt:"search"}),c.jsx("input",{ref:n,className:j(o.input,r,{[o.invalid]:e}),...t})]})}),S="_head_m1oec_1",C={head:S},I="_card_wc3wf_1",L="_card__footer_wc3wf_17",P="_card__head_wc3wf_25",k="_card__title_wc3wf_39",M="_card__description_wc3wf_55",R="_card__price_wc3wf_73",A="_card__currency_wc3wf_99",D="_card__rayting_wc3wf_107",H="_card__buy_wc3wf_137",a={card:I,card__footer:L,card__head:P,card__title:k,card__description:M,card__price:R,card__currency:A,card__rayting:D,card__buy:H};function q({id:s,name:r,price:e,description:t,image:n,rating:l}){const d=x(),p=u=>{u.preventDefault(),d(g(s))};return c.jsxs(f,{to:`/product/${s}`,className:a.card,children:[c.jsxs("div",{className:a.card__head,style:{backgroundImage:`url('${n}')`},children:[c.jsxs("div",{className:a.card__price,children:[e,c.jsx("span",{className:a.card__currency,children:" грн."})]}),c.jsx("button",{className:a.card__buy,onClick:p,children:c.jsx("img",{src:"cart-icon-button.svg",alt:"Добавить в корзину"})}),c.jsxs("div",{className:a.card__rayting,children:[l," ",c.jsx("img",{src:"cart-button-icon.svg",alt:"Иконка звезды"})]})]}),c.jsxs("div",{className:a.card__footer,children:[c.jsx("div",{className:a.card__title,children:r}),c.jsx("div",{className:a.card__description,children:t})]})]})}const T="_wrapper_3uqgc_1",X={wrapper:T};function z({products:s}){return c.jsx("div",{className:X.wrapper,children:s.map(r=>c.jsx(q,{id:r.id,name:r.name,description:r.ingredients.join(", "),rating:r.rating,price:r.price,image:"/react-site-shop-redux-typescript/product-demo.png"},r.id))})}function G(){const[s,r]=i.useState([]),[e,t]=i.useState(!1),[n,l]=i.useState(),[d,p]=i.useState("");i.useEffect(()=>{u(d)},[d]);const u=async h=>{try{t(!0);const{data:_}=await w.get(`${y}/products`,{params:{name:h}});r(_),t(!1)}catch(_){console.error(_),_ instanceof v&&l(_.message),t(!1);return}},m=h=>{p(h.target.value)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:C.head,children:[c.jsx(N,{children:"Меню"}),c.jsx(F,{type:"search",placeholder:"Введите блюдо или состав",onChange:m})]}),c.jsxs("div",{children:[n&&c.jsx(c.Fragment,{children:n}),!e&&s.length>0&&c.jsx(z,{products:s}),e&&c.jsx(c.Fragment,{children:"Загружаем продукты..."}),!e&&s.length===0&&c.jsx("p",{children:"Не найдено блюд по запросу"})]})]})}export{G as default};
