import{r as _,j as c,c as g,u as j,L as f,a as x,b as w,P as y,A as v,H as N}from"./index-Cn1mF41l.js";const b="_input_1ljti_1",E="_invalid_1ljti_35",F="_icon_1ljti_51",o={input:b,invalid:E,"input-wrapper":"_input-wrapper_1ljti_43",icon:F},S=_.forwardRef(function({className:a,isValid:e=!1,...t},n){return c.jsxs("div",{className:o["input-wrapper"],children:[c.jsx("img",{className:o.icon,src:"search-icon.svg",alt:"search"}),c.jsx("input",{ref:n,className:g(o.input,a,{[o.invalid]:e}),...t})]})}),$="_head_m1oec_1",C={head:$},I="_card_wc3wf_1",L="_card__footer_wc3wf_17",P="_card__head_wc3wf_25",k="_card__title_wc3wf_39",M="_card__description_wc3wf_55",R="_card__price_wc3wf_73",A="_card__currency_wc3wf_99",D="_card__rayting_wc3wf_107",H="_card__buy_wc3wf_137",r={card:I,card__footer:L,card__head:P,card__title:k,card__description:M,card__price:R,card__currency:A,card__rayting:D,card__buy:H};function q({id:s,name:a,price:e,description:t,image:n,rating:l}){const d=j(),u=p=>{p.preventDefault(),d(x(s))};return c.jsxs(f,{to:`/product/${s}`,className:r.card,children:[c.jsxs("div",{className:r.card__head,style:{backgroundImage:`url('${n}')`},children:[c.jsxs("div",{className:r.card__price,children:[e,c.jsx("span",{className:r.card__currency,children:" грн."})]}),c.jsx("button",{className:r.card__buy,onClick:u,children:c.jsx("img",{src:"cart-icon-button.svg",alt:"Добавить в корзину"})}),c.jsxs("div",{className:r.card__rayting,children:[l," ",c.jsx("img",{src:"cart-button-icon.svg",alt:"Иконка звезды"})]})]}),c.jsxs("div",{className:r.card__footer,children:[c.jsx("div",{className:r.card__title,children:a}),c.jsx("div",{className:r.card__description,children:t})]})]})}const T="_wrapper_3uqgc_1",X={wrapper:T};function z({products:s}){return c.jsx("div",{className:X.wrapper,children:s.map(a=>c.jsx(q,{id:a.id,name:a.name,description:a.ingredients.join(", "),rating:a.rating,price:a.price,image:a.image},a.id))})}function G(){const[s,a]=_.useState([]),[e,t]=_.useState(!1),[n,l]=_.useState(),[d,u]=_.useState("");_.useEffect(()=>{p(d)},[d]);const p=async h=>{try{t(!0);const{data:i}=await w.get(`${y}/products`,{params:{name:h}});console.log(i),a(i),t(!1)}catch(i){console.error(i),i instanceof v&&l(i.message),t(!1);return}},m=h=>{u(h.target.value)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:C.head,children:[c.jsx(N,{children:"Меню"}),c.jsx(S,{type:"search",placeholder:"Введите блюдо или состав",onChange:m})]}),c.jsxs("div",{children:[n&&c.jsx(c.Fragment,{children:n}),!e&&s.length>0&&c.jsx(z,{products:s}),e&&c.jsx(c.Fragment,{children:"Загружаем продукты..."}),!e&&s.length===0&&c.jsx("p",{children:"Не найдено блюд по запросу"})]})]})}export{G as default};
